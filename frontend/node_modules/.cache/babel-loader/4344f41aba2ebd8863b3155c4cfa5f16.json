{"remainingRequest":"C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ZJ\\go\\src\\frontend\\src\\components\\ChatRenderer\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ZJ\\go\\src\\frontend\\src\\components\\ChatRenderer\\index.vue","mtime":1598758185000},{"path":"C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJ\\go\\src\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxaSlxcZ29cXHNyY1xcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOlxcVXNlcnNcXFpKXFxnb1xcc3JjXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQzpcXFVzZXJzXFxaSlxcZ29cXHNyY1xcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLmNvbnN0cnVjdG9yIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgY29uZmlnIGZyb20gJ0AvYXBpL2NvbmZpZyc7CmltcG9ydCBUaWNrZXIgZnJvbSAiLi9UaWNrZXIudnVlIjsKaW1wb3J0IFRleHRNZXNzYWdlIGZyb20gIi4vVGV4dE1lc3NhZ2UudnVlIjsKaW1wb3J0IEpvaW5NZXNzYWdlIGZyb20gIi4vSm9pbk1lc3NhZ2UudnVlIjsKaW1wb3J0IFF1aXRNZXNzYWdlIGZyb20gIi4vUXVpdE1lc3NhZ2UudnVlIjsKaW1wb3J0IExvdmVNZXNzYWdlIGZyb20gIi4vTG92ZU1lc3NhZ2UudnVlIjsKaW1wb3J0IExlZ2FjeVBhaWRNZXNzYWdlIGZyb20gIi4vTGVnYWN5UGFpZE1lc3NhZ2UudnVlIjsKaW1wb3J0IFBhaWRNZXNzYWdlIGZyb20gIi4vUGFpZE1lc3NhZ2UudnVlIjsKaW1wb3J0IEZvbGxvd01lc3NhZ2UgZnJvbSAiLi9Gb2xsb3dNZXNzYWdlLnZ1ZSI7CmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tICIuL2NvbnN0YW50cyI7CnZhciBDSEFUX1NNT09USF9BTklNQVRJT05fVElNRV9NUyA9IDg0Owp2YXIgU0NST0xMRURfVE9fQk9UVE9NX0VQU0lMT04gPSAxNTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDaGF0UmVuZGVyZXInLAogIGNvbXBvbmVudHM6IHsKICAgIFRpY2tlcjogVGlja2VyLAogICAgVGV4dE1lc3NhZ2U6IFRleHRNZXNzYWdlLAogICAgTGVnYWN5UGFpZE1lc3NhZ2U6IExlZ2FjeVBhaWRNZXNzYWdlLAogICAgUGFpZE1lc3NhZ2U6IFBhaWRNZXNzYWdlLAogICAgSm9pbk1lc3NhZ2U6IEpvaW5NZXNzYWdlLAogICAgUXVpdE1lc3NhZ2U6IFF1aXRNZXNzYWdlLAogICAgTG92ZU1lc3NhZ2U6IExvdmVNZXNzYWdlLAogICAgRm9sbG93TWVzc2FnZTogRm9sbG93TWVzc2FnZQogIH0sCiAgcHJvcHM6IHsKICAgIGNzczogU3RyaW5nLAogICAgbWF4TnVtYmVyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogY29uZmlnLkRFRkFVTFRfQ09ORklHLm1heE51bWJlcgogICAgfSwKICAgIHNob3dHaWZ0TmFtZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBjb25maWcuREVGQVVMVF9DT05GSUcuc2hvd0dpZnROYW1lCiAgICB9LAogICAgc2hvd0dpZnRQcmljZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBjb25maWcuREVGQVVMVF9DT05GSUcuc2hvd0dpZnRQcmljZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpOwogICAgcmV0dXJuIHsKICAgICAgTUVTU0FHRV9UWVBFX1RFWFQ6IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfVEVYVCwKICAgICAgTUVTU0FHRV9UWVBFX0dJRlQ6IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfR0lGVCwKICAgICAgTUVTU0FHRV9UWVBFX01FTUJFUjogY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9NRU1CRVIsCiAgICAgIE1FU1NBR0VfVFlQRV9TVVBFUl9DSEFUOiBjb25zdGFudHMuTUVTU0FHRV9UWVBFX1NVUEVSX0NIQVQsCiAgICAgIE1FU1NBR0VfVFlQRV9MT1ZFOiBjb25zdGFudHMuTUVTU0FHRV9UWVBFX0xPVkUsCiAgICAgIE1FU1NBR0VfVFlQRV9KT0lOOiBjb25zdGFudHMuTUVTU0FHRV9UWVBFX0pPSU4sCiAgICAgIE1FU1NBR0VfVFlQRV9GT0xMT1c6IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfRk9MTE9XLAogICAgICBNRVNTQUdFX1RZUEVfUVVJVDogY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9RVUlULAogICAgICBzdHlsZUVsZW1lbnQ6IHN0eWxlRWxlbWVudCwKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICAvLyDmmL7npLrnmoTmtojmga8KICAgICAgcGFpZE1lc3NhZ2VzOiBbXSwKICAgICAgLy8g5Zu65a6a5Zyo5LiK5pa555qE5raI5oGvCiAgICAgIHNtb290aGVkTWVzc2FnZVF1ZXVlOiBbXSwKICAgICAgLy8g5bmz5ruR5raI5oGv6Zif5YiX77yM55Sx5aSW6YOo6LCD55SoYWRkTWVzc2FnZXPnrYnmlrnms5Xmt7vliqAKICAgICAgZW1pdFNtb290aGVkTWVzc2FnZVRpbWVySWQ6IG51bGwsCiAgICAgIC8vIOa2iOi0ueW5s+a7kea2iOaBr+mYn+WIl+eahOWumuaXtuWZqElECiAgICAgIGVucXVldWVJbnRlcnZhbHM6IFtdLAogICAgICAvLyDmnIDov5Hov5vpmJ/liJfnmoTml7bpl7Tpl7TpmpTvvIznlKjmnaXkvLDorqHkuIvmrKHov5vpmJ/liJfnmoTml7bpl7QKICAgICAgbGFzdEVucXVldWVUaW1lOiBudWxsLAogICAgICAvLyDkuIrmrKHov5vpmJ/liJfnmoTml7bpl7QKICAgICAgZXN0aW1hdGVkRW5xdWV1ZUludGVydmFsOiBudWxsLAogICAgICAvLyDkvLDorqHnmoTkuIvmrKHov5vpmJ/liJfml7bpl7Tpl7TpmpQKICAgICAgbWVzc2FnZXNCdWZmZXI6IFtdLAogICAgICAvLyDmmoLml7bmnKrmmL7npLrnmoTmtojmga/vvIzlvZPkuI3og73oh6rliqjmu5rliqjml7bkvJrnp6/ljovlnKjov5kKICAgICAgcHJlaW5zZXJ0SGVpZ2h0OiAwLAogICAgICAvLyDmj5LlhaXmlrDmtojmga/kuYvliY1pdGVtc+eahOmrmOW6pgogICAgICBpc1Ntb290aGVkOiB0cnVlLAogICAgICAvLyDmmK/lkKblubPmu5Hmu5rliqjvvIzlvZPmtojmga/lpKrlv6vml7bkuI3lubPmu5Hmu5rliqgKICAgICAgY2hhdFJhdGVNczogMTAwMCwKICAgICAgLy8g55So5p2l6K6h566X5raI5oGv6YCf5bqmCiAgICAgIHNjcm9sbFBpeGVsc1JlbWFpbmluZzogMCwKICAgICAgLy8g5bmz5ruR5rua5Yqo5Ymp5L2Z5YOP57SgCiAgICAgIHNjcm9sbFRpbWVSZW1haW5pbmdNczogMCwKICAgICAgLy8g5bmz5ruR5rua5Yqo5Ymp5L2Z5pe26Ze0CiAgICAgIGxhc3RTbW9vdGhDaGF0TWVzc2FnZUFkZE1zOiBudWxsLAogICAgICAvLyDkuIrmrKFzaG93TmV3TWVzc2FnZXPml7bpl7QKICAgICAgc21vb3RoU2Nyb2xsUmFmSGFuZGxlOiBudWxsLAogICAgICAvLyDlubPmu5Hmu5rliqhyZXF1ZXN0QW5pbWF0aW9uRnJhbWXlj6Xmn4QKICAgICAgbGFzdFNtb290aFNjcm9sbFVwZGF0ZTogbnVsbCwKICAgICAgLy8g5bmz5ruR5rua5Yqo5LiK5LiA5bin5pe26Ze0CiAgICAgIGF0Qm90dG9tOiB0cnVlLAogICAgICAvLyDmu5rliqjliLDlupXpg6jvvIznlKjmnaXliKTmlq3og73lkKboh6rliqjmu5rliqgKICAgICAgY2FudFNjcm9sbFN0YXJ0VGltZTogbnVsbCAvLyDlvIDlp4vkuI3og73oh6rliqjmu5rliqjnmoTml7bpl7TvvIznlKjmnaXpmLLmraLljaHkvY8KCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhblNjcm9sbFRvQm90dG9tOiBmdW5jdGlvbiBjYW5TY3JvbGxUb0JvdHRvbSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXRCb3R0b207CiAgICAgIC8qIHx8IHRoaXMuYWxsb3dTY3JvbGwqLwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGNzczogZnVuY3Rpb24gY3NzKHZhbCkgewogICAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSB2YWw7CiAgICB9LAogICAgY2FuU2Nyb2xsVG9Cb3R0b206IGZ1bmN0aW9uIGNhblNjcm9sbFRvQm90dG9tKHZhbCkgewogICAgICB0aGlzLmNhbnRTY3JvbGxTdGFydFRpbWUgPSB2YWwgPyBudWxsIDogbmV3IERhdGUoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN0eWxlRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLmNzczsKICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHRoaXMuc3R5bGVFbGVtZW50KTsKCiAgICBpZiAodGhpcy5lbWl0U21vb3RoZWRNZXNzYWdlVGltZXJJZCkgewogICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZW1pdFNtb290aGVkTWVzc2FnZVRpbWVySWQpOwogICAgICB0aGlzLmVtaXRTbW9vdGhlZE1lc3NhZ2VUaW1lcklkID0gbnVsbDsKICAgIH0KCiAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEdpZnRTaG93Q29udGVudDogZnVuY3Rpb24gZ2V0R2lmdFNob3dDb250ZW50KG1lc3NhZ2UpIHsKICAgICAgcmV0dXJuIGNvbnN0YW50cy5nZXRHaWZ0U2hvd0NvbnRlbnQobWVzc2FnZSwgdGhpcy5zaG93R2lmdE5hbWUpOwogICAgfSwKICAgIGdldFNob3dDb250ZW50OiBjb25zdGFudHMuZ2V0U2hvd0NvbnRlbnQsCiAgICBhZGRNZXNzYWdlOiBmdW5jdGlvbiBhZGRNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5hZGRNZXNzYWdlcyhbbWVzc2FnZV0pOwogICAgfSwKICAgIGFkZE1lc3NhZ2VzOiBmdW5jdGlvbiBhZGRNZXNzYWdlcyhtZXNzYWdlcykgewogICAgICB0aGlzLmVucXVldWVNZXNzYWdlcyhtZXNzYWdlcyk7CiAgICB9LAogICAgbWVyZ2VTaW1pbGFyVGV4dDogZnVuY3Rpb24gbWVyZ2VTaW1pbGFyVGV4dChjb250ZW50KSB7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnRyaW0oKS50b0xvd2VyQ2FzZSgpOwogICAgICB2YXIgcmVzID0gZmFsc2U7CiAgICAgIHRoaXMuZm9yRWFjaFJlY2VudE1lc3NhZ2UoNSwgZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICBpZiAobWVzc2FnZS50eXBlICE9PSBjb25zdGFudHMuTUVTU0FHRV9UWVBFX1RFWFQpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZS5jb250ZW50LnRyaW0oKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHZhciBsb25nZXIsIHNob3J0ZXI7CgogICAgICAgIGlmIChtZXNzYWdlQ29udGVudC5sZW5ndGggPiBjb250ZW50Lmxlbmd0aCkgewogICAgICAgICAgbG9uZ2VyID0gbWVzc2FnZUNvbnRlbnQ7CiAgICAgICAgICBzaG9ydGVyID0gY29udGVudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbG9uZ2VyID0gY29udGVudDsKICAgICAgICAgIHNob3J0ZXIgPSBtZXNzYWdlQ29udGVudDsKICAgICAgICB9CgogICAgICAgIGlmIChsb25nZXIuaW5kZXhPZihzaG9ydGVyKSAhPT0gLTEgLy8g6ZW/55qE5YyF5ZCr55+t55qECiAgICAgICAgJiYgbG9uZ2VyLmxlbmd0aCAtIHNob3J0ZXIubGVuZ3RoIDwgc2hvcnRlci5sZW5ndGggLy8g6ZW/5bqm5beu6L6D5bCPCiAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIOWFtuWunuacieWwj+amgueOh+WvvOiHtOW8ueW5leWNoeS9jwogICAgICAgICAgICBtZXNzYWdlLnJlcGVhdGVkKys7CiAgICAgICAgICAgIHJlcyA9IHRydWU7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzOwogICAgfSwKICAgIG1lcmdlU2ltaWxhck90aGVyOiBmdW5jdGlvbiBtZXJnZVNpbWlsYXJPdGhlcihhdXRob3JOYW1lLCBjb250ZW50KSB7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnRyaW0oKS50b0xvd2VyQ2FzZSgpOwogICAgICB2YXIgcmVzID0gZmFsc2U7CiAgICAgIHRoaXMuZm9yRWFjaFJlY2VudE1lc3NhZ2UoMTAsIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9MT1ZFICYmIG1lc3NhZ2UudHlwZSAhPT0gY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9KT0lOICYmIG1lc3NhZ2UudHlwZSAhPT0gY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9RVUlUICYmIG1lc3NhZ2UudHlwZSAhPT0gY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9GT0xMT1cpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1lc3NhZ2UuYXV0aG9yTmFtZSAhPSBhdXRob3JOYW1lKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHZhciBtZXNzYWdlQ29udGVudCA9IG1lc3NhZ2UuY29udGVudC50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgICB2YXIgbG9uZ2VyLCBzaG9ydGVyOwoKICAgICAgICBpZiAobWVzc2FnZUNvbnRlbnQubGVuZ3RoID4gY29udGVudC5sZW5ndGgpIHsKICAgICAgICAgIGxvbmdlciA9IG1lc3NhZ2VDb250ZW50OwogICAgICAgICAgc2hvcnRlciA9IGNvbnRlbnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxvbmdlciA9IGNvbnRlbnQ7CiAgICAgICAgICBzaG9ydGVyID0gbWVzc2FnZUNvbnRlbnQ7CiAgICAgICAgfQoKICAgICAgICBpZiAobG9uZ2VyLmluZGV4T2Yoc2hvcnRlcikgIT09IC0xIC8vIOmVv+eahOWMheWQq+efreeahAogICAgICAgICYmIGxvbmdlci5sZW5ndGggLSBzaG9ydGVyLmxlbmd0aCA8IHNob3J0ZXIubGVuZ3RoIC8vIOmVv+W6puW3rui+g+WwjwogICAgICAgICkgewogICAgICAgICAgICAvLyDlhbblrp7mnInlsI/mpoLnjoflr7zoh7TlvLnluZXljaHkvY8KICAgICAgICAgICAgbWVzc2FnZS5yZXBlYXRlZCsrOwogICAgICAgICAgICByZXMgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0sCiAgICBtZXJnZVNpbWlsYXJHaWZ0OiBmdW5jdGlvbiBtZXJnZVNpbWlsYXJHaWZ0KGF1dGhvck5hbWUsIHByaWNlLCBnaWZ0TmFtZSwgbnVtKSB7CiAgICAgIHZhciByZXMgPSBmYWxzZTsKICAgICAgdGhpcy5mb3JFYWNoUmVjZW50TWVzc2FnZSg1LCBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfR0lGVCAmJiBtZXNzYWdlLmF1dGhvck5hbWUgPT09IGF1dGhvck5hbWUgJiYgbWVzc2FnZS5naWZ0TmFtZSA9PT0gZ2lmdE5hbWUpIHsKICAgICAgICAgIG1lc3NhZ2UucHJpY2UgKz0gcHJpY2U7CiAgICAgICAgICBtZXNzYWdlLm51bSArPSBudW07CiAgICAgICAgICByZXMgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzOwogICAgfSwKICAgIGZvckVhY2hSZWNlbnRNZXNzYWdlOiBmdW5jdGlvbiBmb3JFYWNoUmVjZW50TWVzc2FnZShudW0sIGNhbGxiYWNrKSB7CiAgICAgIC8vIOS7juaWsOWIsOiAgemBjeWOhm51beadoea2iOaBrwogICAgICBmb3IgKHZhciBpID0gdGhpcy5zbW9vdGhlZE1lc3NhZ2VRdWV1ZS5sZW5ndGggLSAxOyBpID49IDAgJiYgbnVtID4gMDsgaS0tKSB7CiAgICAgICAgdmFyIG1lc3NhZ2VHcm91cCA9IHRoaXMuc21vb3RoZWRNZXNzYWdlUXVldWVbaV07CgogICAgICAgIGZvciAodmFyIGogPSBtZXNzYWdlR3JvdXAubGVuZ3RoIC0gMTsgaiA+PSAwICYmIG51bS0tID4gMDsgai0tKSB7CiAgICAgICAgICBpZiAoIWNhbGxiYWNrKG1lc3NhZ2VHcm91cFtqXSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYXJyID0gW3RoaXMubWVzc2FnZXNCdWZmZXIsIHRoaXMubWVzc2FnZXNdOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIGFyciA9IF9hcnJbX2ldOwoKICAgICAgICBmb3IgKHZhciBfaTIgPSBhcnIubGVuZ3RoIC0gMTsgX2kyID49IDAgJiYgbnVtLS0gPiAwOyBfaTItLSkgewogICAgICAgICAgaWYgKCFjYWxsYmFjayhhcnJbX2kyXSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRlbE1lc3NhZ2U6IGZ1bmN0aW9uIGRlbE1lc3NhZ2UoaWQpIHsKICAgICAgdGhpcy5kZWxNZXNzYWdlcyhbaWRdKTsKICAgIH0sCiAgICBkZWxNZXNzYWdlczogZnVuY3Rpb24gZGVsTWVzc2FnZXMoaWRzKSB7CiAgICAgIHRoaXMuZW5xdWV1ZU1lc3NhZ2VzKGlkcy5tYXAoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHR5cGU6IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfREVMLAogICAgICAgICAgaWQ6IGlkCiAgICAgICAgfTsKICAgICAgfSkpOwogICAgfSwKICAgIGNsZWFyTWVzc2FnZXM6IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZXMoKSB7CiAgICAgIHRoaXMubWVzc2FnZXMgPSBbXTsKICAgICAgdGhpcy5wYWlkTWVzc2FnZXMgPSBbXTsKICAgICAgdGhpcy5zbW9vdGhlZE1lc3NhZ2VRdWV1ZSA9IFtdOwogICAgICB0aGlzLm1lc3NhZ2VzQnVmZmVyID0gW107CiAgICAgIHRoaXMuaXNTbW9vdGhlZCA9IHRydWU7CiAgICAgIHRoaXMubGFzdFNtb290aENoYXRNZXNzYWdlQWRkTXMgPSBudWxsOwogICAgICB0aGlzLmNoYXRSYXRlTXMgPSAxMDAwOwogICAgICB0aGlzLmxhc3RTbW9vdGhTY3JvbGxVcGRhdGUgPSBudWxsOwogICAgICB0aGlzLnNjcm9sbFRpbWVSZW1haW5pbmdNcyA9IHRoaXMuc2Nyb2xsUGl4ZWxzUmVtYWluaW5nID0gMDsKICAgICAgdGhpcy5zbW9vdGhTY3JvbGxSYWZIYW5kbGUgPSBudWxsOwogICAgICB0aGlzLnByZWluc2VydEhlaWdodCA9IDA7CiAgICAgIHRoaXMubWF5YmVSZXNpemVTY3JvbGxDb250YWluZXIoKTsKCiAgICAgIGlmICghdGhpcy5hdEJvdHRvbSkgewogICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZU1lc3NhZ2U6IGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2UoaWQsIG5ld1ZhbHVlc09iaikgewogICAgICB0aGlzLmVucXVldWVNZXNzYWdlcyhbewogICAgICAgIHR5cGU6IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfVVBEQVRFLAogICAgICAgIGlkOiBpZCwKICAgICAgICBuZXdWYWx1ZXNPYmo6IG5ld1ZhbHVlc09iagogICAgICB9XSk7CiAgICB9LAogICAgZW5xdWV1ZU1lc3NhZ2VzOiBmdW5jdGlvbiBlbnF1ZXVlTWVzc2FnZXMobWVzc2FnZXMpIHsKICAgICAgaWYgKHRoaXMubGFzdEVucXVldWVUaW1lKSB7CiAgICAgICAgdmFyIGludGVydmFsID0gbmV3IERhdGUoKSAtIHRoaXMubGFzdEVucXVldWVUaW1lOyAvLyDnkIborrrkuIpC56uZ5Y+R5YyF6Ze06ZqUMVPvvIzlpoLmnpzkuI3ov4fmu6Tpl7TpmpTlpKrnn63nmoTkvJrlr7zoh7Tmtojmga/lubPmu5HlpLHmlYgKCiAgICAgICAgaWYgKGludGVydmFsID4gMTAwKSB7CiAgICAgICAgICB0aGlzLmVucXVldWVJbnRlcnZhbHMucHVzaChpbnRlcnZhbCk7CgogICAgICAgICAgaWYgKHRoaXMuZW5xdWV1ZUludGVydmFscy5sZW5ndGggPiA1KSB7CiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZUludGVydmFscy5zcGxpY2UoMCwgdGhpcy5lbnF1ZXVlSW50ZXJ2YWxzLmxlbmd0aCAtIDUpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuZXN0aW1hdGVkRW5xdWV1ZUludGVydmFsID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuZW5xdWV1ZUludGVydmFscykpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5sYXN0RW5xdWV1ZVRpbWUgPSBuZXcgRGF0ZSgpOyAvLyDlj6rmnInopoHmmL7npLrnmoTmtojmga/pnIDopoHlubPmu5EKCiAgICAgIHZhciBtZXNzYWdlR3JvdXAgPSBbXTsKICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBtZXNzYWdlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgIHZhciBtZXNzYWdlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBtZXNzYWdlR3JvdXAucHVzaChtZXNzYWdlKTsKCiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlICE9PSBjb25zdGFudHMuTUVTU0FHRV9UWVBFX0RFTCAmJiBtZXNzYWdlLnR5cGUgIT09IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfVVBEQVRFKSB7CiAgICAgICAgICAgIHRoaXMuc21vb3RoZWRNZXNzYWdlUXVldWUucHVzaChtZXNzYWdlR3JvdXApOwogICAgICAgICAgICBtZXNzYWdlR3JvdXAgPSBbXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtZXNzYWdlR3JvdXAubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuc21vb3RoZWRNZXNzYWdlUXVldWUucHVzaChtZXNzYWdlR3JvdXApOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZW1pdFNtb290aGVkTWVzc2FnZVRpbWVySWQpIHsKICAgICAgICB0aGlzLmVtaXRTbW9vdGhlZE1lc3NhZ2VUaW1lcklkID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5lbWl0U21vb3RoZWRNZXNzYWdlcyk7CiAgICAgIH0KICAgIH0sCiAgICBlbWl0U21vb3RoZWRNZXNzYWdlczogZnVuY3Rpb24gZW1pdFNtb290aGVkTWVzc2FnZXMoKSB7CiAgICAgIHRoaXMuZW1pdFNtb290aGVkTWVzc2FnZVRpbWVySWQgPSBudWxsOwoKICAgICAgaWYgKHRoaXMuc21vb3RoZWRNZXNzYWdlUXVldWUubGVuZ3RoIDw9IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8g5Lyw6K6h55qE5LiL5qyh6L+b6Zif5YiX5Ymp5L2Z5pe26Ze0CgoKICAgICAgdmFyIGVzdGltYXRlZE5leHRFbnF1ZXVlUmVtYWluVGltZSA9IDEwICogMTAwMDsKCiAgICAgIGlmICh0aGlzLmVzdGltYXRlZEVucXVldWVJbnRlcnZhbCkgewogICAgICAgIGVzdGltYXRlZE5leHRFbnF1ZXVlUmVtYWluVGltZSA9IE1hdGgubWF4KHRoaXMubGFzdEVucXVldWVUaW1lIC0gbmV3IERhdGUoKSArIHRoaXMuZXN0aW1hdGVkRW5xdWV1ZUludGVydmFsLCAxKTsKICAgICAgfSAvLyDmnIDlv6s4MG1zL+adoe+8jOiuoeeul+WPkemAgeeahOa2iOaBr+aVsO+8jOS/neivgeWcqOS4i+asoei/m+mYn+WIl+S5i+WJjea2iOi0ueWujOmYn+WIlwoKCiAgICAgIHZhciBncm91cE51bVRvRW1pdDsKCiAgICAgIGlmICh0aGlzLnNtb290aGVkTWVzc2FnZVF1ZXVlLmxlbmd0aCA8IGVzdGltYXRlZE5leHRFbnF1ZXVlUmVtYWluVGltZSAvIDgwKSB7CiAgICAgICAgLy8g6Zif5YiX5Lit5raI5oGv5pWw5b6I5bCR77yM5q+P5qyh5Y+RMeadoeS5n+iDveWPkeWujAogICAgICAgIGdyb3VwTnVtVG9FbWl0ID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmr4/mrKHlj5Ex5p2h5Lul5LiK77yM5L+d6K+B5oyJ5pyA5b+r6YCf5bqm6IO95Y+R5a6MCiAgICAgICAgZ3JvdXBOdW1Ub0VtaXQgPSBNYXRoLmNlaWwodGhpcy5zbW9vdGhlZE1lc3NhZ2VRdWV1ZS5sZW5ndGggLyAoZXN0aW1hdGVkTmV4dEVucXVldWVSZW1haW5UaW1lIC8gODApKTsKICAgICAgfQoKICAgICAgdmFyIG1lc3NhZ2VHcm91cHMgPSB0aGlzLnNtb290aGVkTWVzc2FnZVF1ZXVlLnNwbGljZSgwLCBncm91cE51bVRvRW1pdCk7CiAgICAgIHZhciBtZXJnZWRHcm91cCA9IFtdOwogICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBtZXNzYWdlR3JvdXBzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7CiAgICAgICAgICB2YXIgbWVzc2FnZUdyb3VwID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTsKICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTsKICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IG1lc3NhZ2VHcm91cFtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkgewogICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICAgIG1lcmdlZEdyb3VwLnB1c2gobWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlOwogICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykgewogICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTsKICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpOwogICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZUdyb3VwKG1lcmdlZEdyb3VwKTsKCiAgICAgIGlmICh0aGlzLnNtb290aGVkTWVzc2FnZVF1ZXVlLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2xlZXBUaW1lOwoKICAgICAgaWYgKGdyb3VwTnVtVG9FbWl0ID09IDEpIHsKICAgICAgICAvLyDpmJ/liJfkuK3mtojmga/mlbDlvojlsJHvvIzpmo/kvr/lrprkuKo4MC0xMDAwbXPnmoTml7bpl7QKICAgICAgICBzbGVlcFRpbWUgPSBlc3RpbWF0ZWROZXh0RW5xdWV1ZVJlbWFpblRpbWUgLyB0aGlzLnNtb290aGVkTWVzc2FnZVF1ZXVlLmxlbmd0aDsKICAgICAgICBzbGVlcFRpbWUgKj0gMC41ICsgTWF0aC5yYW5kb20oKTsKCiAgICAgICAgaWYgKHNsZWVwVGltZSA+IDEwMDApIHsKICAgICAgICAgIHNsZWVwVGltZSA9IDEwMDA7CiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFRpbWUgPCA4MCkgewogICAgICAgICAgc2xlZXBUaW1lID0gODA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOaMieacgOW/q+mAn+W6puWPkQogICAgICAgIHNsZWVwVGltZSA9IDgwOwogICAgICB9CgogICAgICB0aGlzLmVtaXRTbW9vdGhlZE1lc3NhZ2VUaW1lcklkID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5lbWl0U21vb3RoZWRNZXNzYWdlcywgc2xlZXBUaW1lKTsKICAgIH0sCiAgICBoYW5kbGVNZXNzYWdlR3JvdXA6IGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2VHcm91cChtZXNzYWdlR3JvdXApIHsKICAgICAgaWYgKG1lc3NhZ2VHcm91cC5sZW5ndGggPD0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlOwogICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3I0ID0gbWVzc2FnZUdyb3VwW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA0OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gKF9zdGVwNCA9IF9pdGVyYXRvcjQubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSB0cnVlKSB7CiAgICAgICAgICB2YXIgbWVzc2FnZSA9IF9zdGVwNC52YWx1ZTsKCiAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkgewogICAgICAgICAgICBjYXNlIGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfVEVYVDoKICAgICAgICAgICAgY2FzZSBjb25zdGFudHMuTUVTU0FHRV9UWVBFX0dJRlQ6CiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9NRU1CRVI6CiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9TVVBFUl9DSEFUOgogICAgICAgICAgICBjYXNlIGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfTE9WRToKICAgICAgICAgICAgY2FzZSBjb25zdGFudHMuTUVTU0FHRV9UWVBFX0pPSU46CiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9RVUlUOgogICAgICAgICAgICBjYXNlIGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfRk9MTE9XOgogICAgICAgICAgICAgIHRoaXMuaGFuZGxlQWRkTWVzc2FnZShtZXNzYWdlKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzLk1FU1NBR0VfVFlQRV9ERUw6CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEZWxNZXNzYWdlKG1lc3NhZ2UpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSBjb25zdGFudHMuTUVTU0FHRV9UWVBFX1VQREFURToKICAgICAgICAgICAgICB0aGlzLmhhbmRsZVVwZGF0ZU1lc3NhZ2UobWVzc2FnZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlOwogICAgICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjQpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5tYXliZVJlc2l6ZVNjcm9sbENvbnRhaW5lcigpLCB0aGlzLmZsdXNoTWVzc2FnZXNCdWZmZXIoKTsKICAgICAgdGhpcy4kbmV4dFRpY2sodGhpcy5tYXliZVNjcm9sbFRvQm90dG9tKTsKICAgIH0sCiAgICBoYW5kbGVBZGRNZXNzYWdlOiBmdW5jdGlvbiBoYW5kbGVBZGRNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIG1lc3NhZ2UsIHsKICAgICAgICBhZGRUaW1lOiBuZXcgRGF0ZSgpIC8vIOa3u+WKoOS4gOS4quacrOWcsOaXtumXtOe7mVRpY2tlcueUqO+8jOmYsuatouacrOWcsOaXtumXtOWSjOacjeWKoeWZqOaXtumXtOebuOW3ruW+iOWkp+eahOaDheWGtQoKICAgICAgfSk7CiAgICAgIHRoaXMubWVzc2FnZXNCdWZmZXIucHVzaChtZXNzYWdlKTsKCiAgICAgIGlmIChtZXNzYWdlLnR5cGUgIT09IGNvbnN0YW50cy5NRVNTQUdFX1RZUEVfVEVYVCkgewogICAgICAgIHRoaXMucGFpZE1lc3NhZ2VzLnVuc2hpZnQobWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVEZWxNZXNzYWdlOiBmdW5jdGlvbiBoYW5kbGVEZWxNZXNzYWdlKF9yZWYpIHsKICAgICAgdmFyIGlkID0gX3JlZi5pZDsKCiAgICAgIGZvciAodmFyIF9pMyA9IDAsIF9hcnIyID0gW3RoaXMubWVzc2FnZXMsIHRoaXMucGFpZE1lc3NhZ2VzLCB0aGlzLm1lc3NhZ2VzQnVmZmVyXTsgX2kzIDwgX2FycjIubGVuZ3RoOyBfaTMrKykgewogICAgICAgIHZhciBhcnIgPSBfYXJyMltfaTNdOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGFycltpXS5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgYXJyLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgdGhpcy5yZXNldFNtb290aFNjcm9sbCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVVcGRhdGVNZXNzYWdlOiBmdW5jdGlvbiBoYW5kbGVVcGRhdGVNZXNzYWdlKF9yZWYyKSB7CiAgICAgIHZhciBpZCA9IF9yZWYyLmlkLAogICAgICAgICAgbmV3VmFsdWVzT2JqID0gX3JlZjIubmV3VmFsdWVzT2JqOwogICAgICAvLyDpgY3ljobmu5rliqjnmoTmtojmga8KICAgICAgdGhpcy5mb3JFYWNoUmVjZW50TWVzc2FnZSg5OTk5OTk5OTksIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT09IGlkKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIG5hbWUgaW4gbmV3VmFsdWVzT2JqKSB7CiAgICAgICAgICBtZXNzYWdlW25hbWVdID0gbmV3VmFsdWVzT2JqW25hbWVdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsgLy8g6YGN5Y6G5Zu65a6a55qE5raI5oGvCgogICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSB0aGlzLnBhaWRNZXNzYWdlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IChfc3RlcDUgPSBfaXRlcmF0b3I1Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZSkgewogICAgICAgICAgdmFyIG1lc3NhZ2UgPSBfc3RlcDUudmFsdWU7CgogICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT09IGlkKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gbmV3VmFsdWVzT2JqKSB7CiAgICAgICAgICAgIG1lc3NhZ2VbbmFtZV0gPSBuZXdWYWx1ZXNPYmpbbmFtZV07CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjUgPSB0cnVlOwogICAgICAgIF9pdGVyYXRvckVycm9yNSA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSAmJiBfaXRlcmF0b3I1LnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjUucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjUpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I1OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5yZXNldFNtb290aFNjcm9sbCgpOwogICAgfSwKICAgIGZsdXNoTWVzc2FnZXNCdWZmZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9mbHVzaE1lc3NhZ2VzQnVmZmVyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVtb3ZlTnVtLCBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiwgX2RpZEl0ZXJhdG9yRXJyb3I2LCBfaXRlcmF0b3JFcnJvcjYsIF9pdGVyYXRvcjYsIF9zdGVwNiwgbWVzc2FnZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5tZXNzYWdlc0J1ZmZlci5sZW5ndGggPD0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5TY3JvbGxUb0JvdHRvbU9yVGltZWRPdXQoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZXNCdWZmZXIubGVuZ3RoID4gdGhpcy5tYXhOdW1iZXIpIHsKICAgICAgICAgICAgICAgICAgLy8g5pyq5pi+56S65raI5oGv5pWwID4g5pyA5aSn5Y+v5pi+56S65pWw77yM5Lii5byDCiAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNCdWZmZXIuc3BsaWNlKDAsIHRoaXMubWVzc2FnZXNCdWZmZXIubGVuZ3RoIC0gdGhpcy5tYXhOdW1iZXIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZW1vdmVOdW0gPSBNYXRoLm1heCh0aGlzLm1lc3NhZ2VzLmxlbmd0aCArIHRoaXMubWVzc2FnZXNCdWZmZXIubGVuZ3RoIC0gdGhpcy5tYXhOdW1iZXIsIDApOwoKICAgICAgICAgICAgICAgIGlmICghKHJlbW92ZU51bSA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5zcGxpY2UoMCwgcmVtb3ZlTnVtKTsgLy8g6Ziy5q2i5ZCM5pe25re75Yqg5ZKM5Yig6Zmk6aG555uu5pe25omA5pyJ55qE6aG555uu6YeN5paw5riy5p+TIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUvaXNzdWVzLzY4NTcKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbmV4dFRpY2soKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHRoaXMucHJlaW5zZXJ0SGVpZ2h0ID0gdGhpcy4kcmVmcy5pdGVtcy5jbGllbnRIZWlnaHQ7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWU7CiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjYgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yNiA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKCiAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjYgPSB0aGlzLm1lc3NhZ2VzQnVmZmVyW1N5bWJvbC5pdGVyYXRvcl0oKTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IChfc3RlcDYgPSBfaXRlcmF0b3I2Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ID0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICBtZXNzYWdlID0gX3N0ZXA2LnZhbHVlOwogICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDE0KTsKICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNiA9IHRydWU7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjYgPSBfY29udGV4dC50MDsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMzsKCiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ICYmIF9pdGVyYXRvcjYucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNi5yZXR1cm4oKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyNTsKCiAgICAgICAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yNikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNjsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjUpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgyMik7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQnVmZmVyID0gW107IC8vIOetiWl0ZW1z6auY5bqm5Y+Y5YyWCgogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2sodGhpcy5zaG93TmV3TWVzc2FnZXMpOwoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1sxNCwgMTgsIDIyLCAzMF0sIFsyMywsIDI1LCAyOV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZmx1c2hNZXNzYWdlc0J1ZmZlcigpIHsKICAgICAgICByZXR1cm4gX2ZsdXNoTWVzc2FnZXNCdWZmZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZsdXNoTWVzc2FnZXNCdWZmZXI7CiAgICB9KCksCiAgICBzaG93TmV3TWVzc2FnZXM6IGZ1bmN0aW9uIHNob3dOZXdNZXNzYWdlcygpIHsKICAgICAgdmFyIGhhc1Njcm9sbEJhciA9IHRoaXMuJHJlZnMuaXRlbXMuY2xpZW50SGVpZ2h0ID4gdGhpcy4kcmVmcy5zY3JvbGxlci5jbGllbnRIZWlnaHQ7CiAgICAgIHRoaXMuJHJlZnMuaXRlbU9mZnNldC5zdHlsZS5oZWlnaHQgPSAiIi5jb25jYXQodGhpcy4kcmVmcy5pdGVtcy5jbGllbnRIZWlnaHQsICJweCIpOwoKICAgICAgaWYgKCF0aGlzLmNhblNjcm9sbFRvQm90dG9tT3JUaW1lZE91dCgpIHx8ICFoYXNTY3JvbGxCYXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8g6K6h566X5Ymp5L2Z5YOP57SgCgoKICAgICAgdGhpcy5zY3JvbGxQaXhlbHNSZW1haW5pbmcgKz0gdGhpcy4kcmVmcy5pdGVtcy5jbGllbnRIZWlnaHQgLSB0aGlzLnByZWluc2VydEhlaWdodDsKICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpOyAvLyDorqHnrpfmmK/lkKblubPmu5Hmu5rliqjjgIHliankvZnml7bpl7QKCiAgICAgIGlmICghdGhpcy5sYXN0U21vb3RoQ2hhdE1lc3NhZ2VBZGRNcykgewogICAgICAgIHRoaXMubGFzdFNtb290aENoYXRNZXNzYWdlQWRkTXMgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgdmFyIGludGVydmFsID0gcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLmxhc3RTbW9vdGhDaGF0TWVzc2FnZUFkZE1zOwogICAgICB0aGlzLmNoYXRSYXRlTXMgPSAwLjkgKiB0aGlzLmNoYXRSYXRlTXMgKyAwLjEgKiBpbnRlcnZhbDsKCiAgICAgIGlmICh0aGlzLmlzU21vb3RoZWQpIHsKICAgICAgICBpZiAodGhpcy5jaGF0UmF0ZU1zIDwgNDAwKSB7CiAgICAgICAgICB0aGlzLmlzU21vb3RoZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuY2hhdFJhdGVNcyA+IDQ1MCkgewogICAgICAgICAgdGhpcy5pc1Ntb290aGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc2Nyb2xsVGltZVJlbWFpbmluZ01zICs9IHRoaXMuaXNTbW9vdGhlZCA/IENIQVRfU01PT1RIX0FOSU1BVElPTl9USU1FX01TIDogMDsKCiAgICAgIGlmICghdGhpcy5zbW9vdGhTY3JvbGxSYWZIYW5kbGUpIHsKICAgICAgICB0aGlzLnNtb290aFNjcm9sbFJhZkhhbmRsZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zbW9vdGhTY3JvbGwpOwogICAgICB9CgogICAgICB0aGlzLmxhc3RTbW9vdGhDaGF0TWVzc2FnZUFkZE1zID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICB9LAogICAgc21vb3RoU2Nyb2xsOiBmdW5jdGlvbiBzbW9vdGhTY3JvbGwodGltZSkgewogICAgICBpZiAoIXRoaXMubGFzdFNtb290aFNjcm9sbFVwZGF0ZSkgewogICAgICAgIC8vIOesrOS4gOW4pwogICAgICAgIHRoaXMubGFzdFNtb290aFNjcm9sbFVwZGF0ZSA9IHRpbWU7CiAgICAgICAgdGhpcy5zbW9vdGhTY3JvbGxSYWZIYW5kbGUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuc21vb3RoU2Nyb2xsKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpbnRlcnZhbCA9IHRpbWUgLSB0aGlzLmxhc3RTbW9vdGhTY3JvbGxVcGRhdGU7CgogICAgICBpZiAodGhpcy5zY3JvbGxQaXhlbHNSZW1haW5pbmcgPD0gMCB8fCB0aGlzLnNjcm9sbFBpeGVsc1JlbWFpbmluZyA+PSA0MDAgLy8g5bey57uP5rua5Yqo5Yiw5bqV6YOo5oiW6ICF56a75bqV6YOo5aSq6L+c5YiZ57uT5p2fCiAgICAgIHx8IGludGVydmFsID49IDEwMDAgLy8g56a75LiK5LiA5bin5pe26Ze05aSq5LmF77yM5Y+v6IO955So5oi35YiH5o2i5Yiw5YW25LuW572R6aG1CiAgICAgIHx8IHRoaXMuc2Nyb2xsVGltZVJlbWFpbmluZ01zIDw9IDAgLy8g5pe26Ze05bey57uT5p2fCiAgICAgICkgewogICAgICAgICAgdGhpcy5yZXNldFNtb290aFNjcm9sbCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgIHZhciBwaXhlbHNUb1Njcm9sbCA9IGludGVydmFsIC8gdGhpcy5zY3JvbGxUaW1lUmVtYWluaW5nTXMgKiB0aGlzLnNjcm9sbFBpeGVsc1JlbWFpbmluZzsKICAgICAgdGhpcy5zY3JvbGxQaXhlbHNSZW1haW5pbmcgLT0gcGl4ZWxzVG9TY3JvbGw7CgogICAgICBpZiAodGhpcy5zY3JvbGxQaXhlbHNSZW1haW5pbmcgPCAwKSB7CiAgICAgICAgdGhpcy5zY3JvbGxQaXhlbHNSZW1haW5pbmcgPSAwOwogICAgICB9CgogICAgICB0aGlzLnNjcm9sbFRpbWVSZW1haW5pbmdNcyAtPSBpbnRlcnZhbDsKCiAgICAgIGlmICh0aGlzLnNjcm9sbFRpbWVSZW1haW5pbmdNcyA8IDApIHsKICAgICAgICB0aGlzLnNjcm9sbFRpbWVSZW1haW5pbmdNcyA9IDA7CiAgICAgIH0KCiAgICAgIHRoaXMubGFzdFNtb290aFNjcm9sbFVwZGF0ZSA9IHRpbWU7CiAgICAgIHRoaXMuc21vb3RoU2Nyb2xsUmFmSGFuZGxlID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnNtb290aFNjcm9sbCk7CiAgICB9LAogICAgcmVzZXRTbW9vdGhTY3JvbGw6IGZ1bmN0aW9uIHJlc2V0U21vb3RoU2Nyb2xsKCkgewogICAgICB0aGlzLnNjcm9sbFRpbWVSZW1haW5pbmdNcyA9IHRoaXMuc2Nyb2xsUGl4ZWxzUmVtYWluaW5nID0gMDsKICAgICAgdGhpcy5sYXN0U21vb3RoU2Nyb2xsVXBkYXRlID0gbnVsbDsKCiAgICAgIGlmICh0aGlzLnNtb290aFNjcm9sbFJhZkhhbmRsZSkgewogICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnNtb290aFNjcm9sbFJhZkhhbmRsZSk7CiAgICAgICAgdGhpcy5zbW9vdGhTY3JvbGxSYWZIYW5kbGUgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgbWF5YmVSZXNpemVTY3JvbGxDb250YWluZXI6IGZ1bmN0aW9uIG1heWJlUmVzaXplU2Nyb2xsQ29udGFpbmVyKCkgewogICAgICB0aGlzLiRyZWZzLml0ZW1PZmZzZXQuc3R5bGUuaGVpZ2h0ID0gIiIuY29uY2F0KHRoaXMuJHJlZnMuaXRlbXMuY2xpZW50SGVpZ2h0LCAicHgiKTsKICAgICAgdGhpcy5tYXliZVNjcm9sbFRvQm90dG9tKCk7CiAgICB9LAogICAgbWF5YmVTY3JvbGxUb0JvdHRvbTogZnVuY3Rpb24gbWF5YmVTY3JvbGxUb0JvdHRvbSgpIHsKICAgICAgaWYgKHRoaXMuY2FuU2Nyb2xsVG9Cb3R0b21PclRpbWVkT3V0KCkpIHsKICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUb0JvdHRvbTogZnVuY3Rpb24gc2Nyb2xsVG9Cb3R0b20oKSB7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gTWF0aC5wb3coMiwgMjQpOwogICAgICB0aGlzLmF0Qm90dG9tID0gdHJ1ZTsKICAgIH0sCiAgICBvblNjcm9sbDogZnVuY3Rpb24gb25TY3JvbGwoKSB7CiAgICAgIHRoaXMucmVmcmVzaENhbnRTY3JvbGxTdGFydFRpbWUoKTsKICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy4kcmVmcy5zY3JvbGxlcjsKICAgICAgdGhpcy5hdEJvdHRvbSA9IHNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIHNjcm9sbGVyLnNjcm9sbFRvcCAtIHNjcm9sbGVyLmNsaWVudEhlaWdodCA8IFNDUk9MTEVEX1RPX0JPVFRPTV9FUFNJTE9OOwogICAgICB0aGlzLmZsdXNoTWVzc2FnZXNCdWZmZXIoKTsKICAgIH0sCiAgICBjYW5TY3JvbGxUb0JvdHRvbU9yVGltZWRPdXQ6IGZ1bmN0aW9uIGNhblNjcm9sbFRvQm90dG9tT3JUaW1lZE91dCgpIHsKICAgICAgaWYgKHRoaXMuY2FuU2Nyb2xsVG9Cb3R0b20pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSAvLyDpmLLmraLlnKhPQlPkuK3ljaHkvY/vvIzotoXov4fkuIDlrprml7bpl7TkuZ/lj6/ku6Xoh6rliqjmu5rliqgKCgogICAgICByZXR1cm4gbmV3IERhdGUoKSAtIHRoaXMuY2FudFNjcm9sbFN0YXJ0VGltZSA+PSA1ICogMTAwMDsKICAgIH0sCiAgICByZWZyZXNoQ2FudFNjcm9sbFN0YXJ0VGltZTogZnVuY3Rpb24gcmVmcmVzaENhbnRTY3JvbGxTdGFydFRpbWUoKSB7CiAgICAgIC8vIOaciem8oOagh+S6i+S7tuaXtuWIt+aWsO+8jOmYsuatoueUqOaIt+eci+W8ueW5leaXtuiHquWKqOa7muWKqAogICAgICBpZiAodGhpcy5jYW50U2Nyb2xsU3RhcnRUaW1lKSB7CiAgICAgICAgdGhpcy5jYW50U2Nyb2xsU3RhcnRUaW1lID0gbmV3IERhdGUoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <yt-live-chat-renderer class=\"style-scope yt-live-chat-app\" style=\"--scrollbar-width:11px;\" hide-timestamps\n    @mousemove=\"refreshCantScrollStartTime\"\n  >\n    <ticker class=\"style-scope yt-live-chat-renderer\" :messages=\"paidMessages\" :showGiftName=\"showGiftName\"\n      :hidden=\"paidMessages.length === 0\"\n    ></ticker>\n    <yt-live-chat-item-list-renderer class=\"style-scope yt-live-chat-renderer\" allow-scroll>\n      <div ref=\"scroller\" id=\"item-scroller\" class=\"style-scope yt-live-chat-item-list-renderer animated\" @scroll=\"onScroll\">\n        <div ref=\"itemOffset\" id=\"item-offset\" class=\"style-scope yt-live-chat-item-list-renderer\" style=\"height: 0px;\">\n          <div ref=\"items\" id=\"items\" class=\"style-scope yt-live-chat-item-list-renderer\" style=\"overflow: hidden\"\n            :style=\"{transform: `translateY(${Math.floor(scrollPixelsRemaining)}px)`}\"\n          >\n            <template v-for=\"message in messages\">\n              <text-message :key=\"message.id\" v-if=\"message.type === MESSAGE_TYPE_TEXT\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :avatarUrl=\"message.avatarUrl\" :time=\"message.time\" :authorName=\"message.authorName\"\n                :authorType=\"message.authorType\" :content=\"getShowContent(message)\" :privilegeType=\"message.privilegeType\"\n                :repeated=\"message.repeated\"\n              ></text-message>\n              <paid-message :key=\"message.id\" v-else-if=\"message.type === MESSAGE_TYPE_GIFT\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :price=\"message.price\" :avatarUrl=\"message.avatarUrl\" :authorName=\"message.authorName\"\n                :time=\"message.time\" :content=\"getGiftShowContent(message)\" :showGiftPrice=\"showGiftPrice\"\n              ></paid-message>\n              <legacy-paid-message :key=\"message.id\" v-else-if=\"message.type === MESSAGE_TYPE_MEMBER\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :avatarUrl=\"message.avatarUrl\" :title=\"message.title\" :content=\"message.content\"\n                :time=\"message.time\"\n              ></legacy-paid-message>\n              <paid-message :key=\"message.id\" v-else-if=\"message.type === MESSAGE_TYPE_SUPER_CHAT\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :price=\"message.price\" :avatarUrl=\"message.avatarUrl\" :authorName=\"message.authorName\"\n                :time=\"message.time\" :content=\"getShowContent(message)\"\n              ></paid-message>\n              <join-message :key=\"message.id\" v-if=\"message.type === MESSAGE_TYPE_JOIN\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :avatarUrl=\"message.avatarUrl\" :time=\"message.time\" :authorName=\"message.authorName\"\n                :authorType=\"message.authorType\" :content=\"getShowContent(message)\" :privilegeType=\"message.privilegeType\"\n                :repeated=\"message.repeated\"\n              ></join-message>\n              <quit-message :key=\"message.id\" v-if=\"message.type === MESSAGE_TYPE_QUIT\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :avatarUrl=\"message.avatarUrl\" :time=\"message.time\" :authorName=\"message.authorName\"\n                :authorType=\"message.authorType\" :content=\"getShowContent(message)\" :privilegeType=\"message.privilegeType\"\n                :repeated=\"message.repeated\"\n              ></quit-message>\n              <love-message :key=\"message.id\" v-if=\"message.type === MESSAGE_TYPE_LOVE\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :avatarUrl=\"message.avatarUrl\" :time=\"message.time\" :authorName=\"message.authorName\"\n                :authorType=\"message.authorType\" :content=\"getShowContent(message)\" :privilegeType=\"message.privilegeType\"\n                :repeated=\"message.repeated\"\n              ></love-message>\n              <follow-message :key=\"message.id\" v-if=\"message.type === MESSAGE_TYPE_FOLLOW\"\n                class=\"style-scope yt-live-chat-item-list-renderer\"\n                :avatarUrl=\"message.avatarUrl\" :time=\"message.time\" :authorName=\"message.authorName\"\n                :authorType=\"message.authorType\" :content=\"getShowContent(message)\" :privilegeType=\"message.privilegeType\"\n                :repeated=\"message.repeated\"\n              ></follow-message>\n            </template>\n          </div>\n        </div>\n      </div>\n    </yt-live-chat-item-list-renderer>\n  </yt-live-chat-renderer>\n</template>\n\n<script>\nimport * as config from '@/api/config'\nimport Ticker from './Ticker.vue'\nimport TextMessage from './TextMessage.vue'\nimport JoinMessage from './JoinMessage.vue'\nimport QuitMessage from './QuitMessage.vue'\nimport LoveMessage from './LoveMessage.vue'\nimport LegacyPaidMessage from './LegacyPaidMessage.vue'\nimport PaidMessage from './PaidMessage.vue'\nimport FollowMessage from './FollowMessage.vue'\nimport * as constants from './constants'\n\nconst CHAT_SMOOTH_ANIMATION_TIME_MS = 84\nconst SCROLLED_TO_BOTTOM_EPSILON = 15\n\nexport default {\n  name: 'ChatRenderer',\n  components: {\n    Ticker,\n    TextMessage,\n    LegacyPaidMessage,\n    PaidMessage,\n    JoinMessage,\n    QuitMessage,\n    LoveMessage,\n    FollowMessage\n  },\n  props: {\n    css: String,\n    maxNumber: {\n      type: Number,\n      default: config.DEFAULT_CONFIG.maxNumber\n    },\n    showGiftName: {\n      type: Boolean,\n      default: config.DEFAULT_CONFIG.showGiftName\n    },\n    showGiftPrice: {\n      type: Boolean,\n      default: config.DEFAULT_CONFIG.showGiftPrice\n    }\n  },\n  data() {\n    let styleElement = document.createElement('style')\n    document.head.appendChild(styleElement)\n    return {\n      MESSAGE_TYPE_TEXT: constants.MESSAGE_TYPE_TEXT,\n      MESSAGE_TYPE_GIFT: constants.MESSAGE_TYPE_GIFT,\n      MESSAGE_TYPE_MEMBER: constants.MESSAGE_TYPE_MEMBER,\n      MESSAGE_TYPE_SUPER_CHAT: constants.MESSAGE_TYPE_SUPER_CHAT,\n      MESSAGE_TYPE_LOVE: constants.MESSAGE_TYPE_LOVE,\n      MESSAGE_TYPE_JOIN: constants.MESSAGE_TYPE_JOIN,\n      MESSAGE_TYPE_FOLLOW: constants.MESSAGE_TYPE_FOLLOW,\n      MESSAGE_TYPE_QUIT: constants.MESSAGE_TYPE_QUIT,\n\n      styleElement,\n      messages: [],                        // 显示的消息\n      paidMessages: [],                    // 固定在上方的消息\n\n      smoothedMessageQueue: [],            // 平滑消息队列，由外部调用addMessages等方法添加\n      emitSmoothedMessageTimerId: null,    // 消费平滑消息队列的定时器ID\n      enqueueIntervals: [],                // 最近进队列的时间间隔，用来估计下次进队列的时间\n      lastEnqueueTime: null,               // 上次进队列的时间\n      estimatedEnqueueInterval: null,      // 估计的下次进队列时间间隔\n\n      messagesBuffer: [],                  // 暂时未显示的消息，当不能自动滚动时会积压在这\n      preinsertHeight: 0,                  // 插入新消息之前items的高度\n      isSmoothed: true,                    // 是否平滑滚动，当消息太快时不平滑滚动\n      chatRateMs: 1000,                    // 用来计算消息速度\n      scrollPixelsRemaining: 0,            // 平滑滚动剩余像素\n      scrollTimeRemainingMs: 0,            // 平滑滚动剩余时间\n      lastSmoothChatMessageAddMs: null,    // 上次showNewMessages时间\n      smoothScrollRafHandle: null,         // 平滑滚动requestAnimationFrame句柄\n      lastSmoothScrollUpdate: null,        // 平滑滚动上一帧时间\n\n      atBottom: true,                      // 滚动到底部，用来判断能否自动滚动\n      cantScrollStartTime: null            // 开始不能自动滚动的时间，用来防止卡住\n    }\n  },\n  computed: {\n    canScrollToBottom() {\n      return this.atBottom/* || this.allowScroll*/\n    }\n  },\n  watch: {\n    css(val) {\n      this.styleElement.innerText = val\n    },\n    canScrollToBottom(val) {\n      this.cantScrollStartTime = val ? null : new Date()\n    }\n  },\n  mounted() {\n    this.styleElement.innerText = this.css\n    this.scrollToBottom()\n  },\n  beforeDestroy() {\n    document.head.removeChild(this.styleElement)\n    if (this.emitSmoothedMessageTimerId) {\n      window.clearTimeout(this.emitSmoothedMessageTimerId)\n      this.emitSmoothedMessageTimerId = null\n    }\n    this.clearMessages()\n  },\n  methods: {\n    getGiftShowContent(message) {\n      return constants.getGiftShowContent(message, this.showGiftName)\n    },\n    getShowContent: constants.getShowContent,\n\n    addMessage(message) {\n      this.addMessages([message])\n    },\n    addMessages(messages) {\n      this.enqueueMessages(messages)\n    },\n    mergeSimilarText(content) {\n      content = content.trim().toLowerCase()\n      let res = false\n      this.forEachRecentMessage(5, message => {\n        if (message.type !== constants.MESSAGE_TYPE_TEXT) {\n          return true\n        }\n        let messageContent = message.content.trim().toLowerCase()\n        let longer, shorter\n        if (messageContent.length > content.length) {\n          longer = messageContent\n          shorter = content\n        } else {\n          longer = content\n          shorter = messageContent\n        }\n        if (longer.indexOf(shorter) !== -1 // 长的包含短的\n            && longer.length - shorter.length < shorter.length // 长度差较小\n        ) {\n          // 其实有小概率导致弹幕卡住\n          message.repeated++\n          res = true\n          return false\n        }\n        return true\n      })\n      return res\n    },\n    mergeSimilarOther(authorName, content) {\n      content = content.trim().toLowerCase()\n      let res = false\n      this.forEachRecentMessage(10, message => {\n        if (message.type !== constants.MESSAGE_TYPE_LOVE && \n         message.type !== constants.MESSAGE_TYPE_JOIN && \n         message.type !== constants.MESSAGE_TYPE_QUIT && \n         message.type !== constants.MESSAGE_TYPE_FOLLOW\n         ) {\n          return true\n        }\n        if(message.authorName != authorName){\n          return true\n        }\n        let messageContent = message.content.trim().toLowerCase()\n        let longer, shorter\n        if (messageContent.length > content.length) {\n          longer = messageContent\n          shorter = content\n        } else {\n          longer = content\n          shorter = messageContent\n        }\n        if (longer.indexOf(shorter) !== -1 // 长的包含短的\n            && longer.length - shorter.length < shorter.length // 长度差较小\n        ) {\n          // 其实有小概率导致弹幕卡住\n          message.repeated++\n          res = true\n          return false\n        }\n        return true\n      })\n      return res\n    },\n    mergeSimilarGift(authorName, price, giftName, num) {\n      let res = false\n      this.forEachRecentMessage(5, message => {\n        if (message.type === constants.MESSAGE_TYPE_GIFT\n            && message.authorName === authorName\n            && message.giftName === giftName\n        ) {\n          message.price += price\n          message.num += num\n          res = true\n          return false\n        }\n        return true\n      })\n      return res\n    },\n    forEachRecentMessage(num, callback) {\n      // 从新到老遍历num条消息\n      for (let i = this.smoothedMessageQueue.length - 1; i >= 0 && num > 0; i--) {\n        let messageGroup = this.smoothedMessageQueue[i]\n        for (let j = messageGroup.length - 1; j >= 0 && num-- > 0; j--) {\n          if (!callback(messageGroup[j])) {\n            return\n          }\n        }\n      }\n      for (let arr of [this.messagesBuffer, this.messages]) {\n        for (let i = arr.length - 1; i >= 0 && num-- > 0; i--) {\n          if (!callback(arr[i])) {\n            return\n          }\n        }\n      }\n    },\n    delMessage(id) {\n      this.delMessages([id])\n    },\n    delMessages(ids) {\n      this.enqueueMessages(ids.map(id => {\n        return {\n          type: constants.MESSAGE_TYPE_DEL,\n          id\n        }\n      }))\n    },\n    clearMessages() {\n      this.messages = []\n      this.paidMessages = []\n      this.smoothedMessageQueue = []\n      this.messagesBuffer = []\n      this.isSmoothed = true\n      this.lastSmoothChatMessageAddMs = null\n      this.chatRateMs = 1000\n      this.lastSmoothScrollUpdate = null\n      this.scrollTimeRemainingMs = this.scrollPixelsRemaining = 0\n      this.smoothScrollRafHandle = null\n      this.preinsertHeight = 0\n      this.maybeResizeScrollContainer()\n      if (!this.atBottom) {\n        this.scrollToBottom()\n      }\n    },\n    updateMessage(id, newValuesObj) {\n      this.enqueueMessages([{\n        type: constants.MESSAGE_TYPE_UPDATE,\n        id,\n        newValuesObj\n      }])\n    },\n\n    enqueueMessages(messages) {\n      if (this.lastEnqueueTime) {\n        let interval = new Date() - this.lastEnqueueTime\n        // 理论上B站发包间隔1S，如果不过滤间隔太短的会导致消息平滑失效\n        if (interval > 100) {\n          this.enqueueIntervals.push(interval)\n          if (this.enqueueIntervals.length > 5) {\n            this.enqueueIntervals.splice(0, this.enqueueIntervals.length - 5)\n          }\n          this.estimatedEnqueueInterval = Math.max(...this.enqueueIntervals)\n        }\n      }\n      this.lastEnqueueTime = new Date()\n\n      // 只有要显示的消息需要平滑\n      let messageGroup = []\n      for (let message of messages) {\n        messageGroup.push(message)\n        if (message.type !== constants.MESSAGE_TYPE_DEL && message.type !== constants.MESSAGE_TYPE_UPDATE) {\n          this.smoothedMessageQueue.push(messageGroup)\n          messageGroup = []\n        }\n      }\n      if (messageGroup.length > 0) {\n          this.smoothedMessageQueue.push(messageGroup)\n      }\n\n      if (!this.emitSmoothedMessageTimerId) {\n        this.emitSmoothedMessageTimerId = window.setTimeout(this.emitSmoothedMessages)\n      }\n    },\n    emitSmoothedMessages() {\n      this.emitSmoothedMessageTimerId = null\n      if (this.smoothedMessageQueue.length <= 0) {\n        return\n      }\n\n      // 估计的下次进队列剩余时间\n      let estimatedNextEnqueueRemainTime = 10 * 1000\n      if (this.estimatedEnqueueInterval) {\n        estimatedNextEnqueueRemainTime = Math.max(this.lastEnqueueTime - new Date() + this.estimatedEnqueueInterval, 1)\n      }\n      // 最快80ms/条，计算发送的消息数，保证在下次进队列之前消费完队列\n      let groupNumToEmit\n      if (this.smoothedMessageQueue.length < estimatedNextEnqueueRemainTime / 80) {\n        // 队列中消息数很少，每次发1条也能发完\n        groupNumToEmit = 1\n      } else {\n        // 每次发1条以上，保证按最快速度能发完\n        groupNumToEmit = Math.ceil(this.smoothedMessageQueue.length / (estimatedNextEnqueueRemainTime / 80))\n      }\n\n      let messageGroups = this.smoothedMessageQueue.splice(0, groupNumToEmit)\n      let mergedGroup = []\n      for (let messageGroup of messageGroups) {\n        for (let message of messageGroup) {\n          mergedGroup.push(message)\n        }\n      }\n      this.handleMessageGroup(mergedGroup)\n\n      if (this.smoothedMessageQueue.length <= 0) {\n        return\n      }\n      let sleepTime\n      if (groupNumToEmit == 1) {\n        // 队列中消息数很少，随便定个80-1000ms的时间\n        sleepTime = estimatedNextEnqueueRemainTime / this.smoothedMessageQueue.length\n        sleepTime *= 0.5 + Math.random()\n        if (sleepTime > 1000) {\n          sleepTime = 1000\n        } else if (sleepTime < 80) {\n          sleepTime = 80\n        }\n      } else {\n        // 按最快速度发\n        sleepTime = 80\n      }\n      this.emitSmoothedMessageTimerId = window.setTimeout(this.emitSmoothedMessages, sleepTime)\n    },\n\n    handleMessageGroup(messageGroup) {\n      if (messageGroup.length <= 0) {\n        return\n      }\n\n      for (let message of messageGroup) {\n        switch (message.type) {\n          case constants.MESSAGE_TYPE_TEXT:\n          case constants.MESSAGE_TYPE_GIFT:\n          case constants.MESSAGE_TYPE_MEMBER:\n          case constants.MESSAGE_TYPE_SUPER_CHAT:\n          case constants.MESSAGE_TYPE_LOVE:\n          case constants.MESSAGE_TYPE_JOIN:\n          case constants.MESSAGE_TYPE_QUIT:\n          case constants.MESSAGE_TYPE_FOLLOW:\n            this.handleAddMessage(message)\n            break\n          case constants.MESSAGE_TYPE_DEL:\n            this.handleDelMessage(message)\n            break\n          case constants.MESSAGE_TYPE_UPDATE:\n            this.handleUpdateMessage(message)\n            break\n        }\n      }\n\n      this.maybeResizeScrollContainer(),\n      this.flushMessagesBuffer()\n      this.$nextTick(this.maybeScrollToBottom)\n    },\n    handleAddMessage(message) {\n      message = {\n        ...message,\n        addTime: new Date() // 添加一个本地时间给Ticker用，防止本地时间和服务器时间相差很大的情况\n      }\n      this.messagesBuffer.push(message)\n      if (message.type !== constants.MESSAGE_TYPE_TEXT) {\n        this.paidMessages.unshift(message)\n      }\n    },\n    handleDelMessage({id}) {\n      for (let arr of [this.messages, this.paidMessages, this.messagesBuffer]) {\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].id === id) {\n            arr.splice(i, 1)\n            this.resetSmoothScroll()\n            break\n          }\n        }\n      }\n    },\n    handleUpdateMessage({id, newValuesObj}) {\n      // 遍历滚动的消息\n      this.forEachRecentMessage(999999999, message => {\n        if (message.id !== id) {\n          return true\n        }\n        for (let name in newValuesObj) {\n          message[name] = newValuesObj[name]\n        }\n        return false\n      })\n      // 遍历固定的消息\n      for (let message of this.paidMessages) {\n        if (message.id !== id) {\n          continue\n        }\n        for (let name in newValuesObj) {\n          message[name] = newValuesObj[name]\n        }\n        break\n      }\n      this.resetSmoothScroll()\n    },\n\n    async flushMessagesBuffer() {\n      if (this.messagesBuffer.length <= 0) {\n        return\n      }\n      if (!this.canScrollToBottomOrTimedOut()) {\n        if (this.messagesBuffer.length > this.maxNumber) {\n          // 未显示消息数 > 最大可显示数，丢弃\n          this.messagesBuffer.splice(0, this.messagesBuffer.length - this.maxNumber)\n        }\n        return\n      }\n\n      let removeNum = Math.max(this.messages.length + this.messagesBuffer.length - this.maxNumber, 0)\n      if (removeNum > 0) {\n        this.messages.splice(0, removeNum)\n        // 防止同时添加和删除项目时所有的项目重新渲染 https://github.com/vuejs/vue/issues/6857\n        await this.$nextTick()\n      }\n\n      this.preinsertHeight = this.$refs.items.clientHeight\n      for (let message of this.messagesBuffer) {\n        this.messages.push(message)\n      }\n      this.messagesBuffer = []\n      // 等items高度变化\n      this.$nextTick(this.showNewMessages)\n    },\n    showNewMessages() {\n      let hasScrollBar = this.$refs.items.clientHeight > this.$refs.scroller.clientHeight\n      this.$refs.itemOffset.style.height = `${this.$refs.items.clientHeight}px`\n      if (!this.canScrollToBottomOrTimedOut() || !hasScrollBar) {\n        return\n      }\n\n      // 计算剩余像素\n      this.scrollPixelsRemaining += this.$refs.items.clientHeight - this.preinsertHeight\n      this.scrollToBottom()\n\n      // 计算是否平滑滚动、剩余时间\n      if (!this.lastSmoothChatMessageAddMs) {\n        this.lastSmoothChatMessageAddMs = performance.now()\n      }\n      let interval = performance.now() - this.lastSmoothChatMessageAddMs\n      this.chatRateMs = 0.9 * this.chatRateMs + 0.1 * interval\n      if (this.isSmoothed) {\n        if (this.chatRateMs < 400) {\n          this.isSmoothed = false\n        }\n      } else {\n        if (this.chatRateMs > 450) {\n          this.isSmoothed = true\n        }\n      }\n      this.scrollTimeRemainingMs += this.isSmoothed ? CHAT_SMOOTH_ANIMATION_TIME_MS : 0\n\n      if (!this.smoothScrollRafHandle) {\n        this.smoothScrollRafHandle = window.requestAnimationFrame(this.smoothScroll)\n      }\n      this.lastSmoothChatMessageAddMs = performance.now()\n    },\n    smoothScroll(time) {\n      if (!this.lastSmoothScrollUpdate) {\n        // 第一帧\n        this.lastSmoothScrollUpdate = time\n        this.smoothScrollRafHandle = window.requestAnimationFrame(this.smoothScroll)\n        return\n      }\n\n      let interval = time - this.lastSmoothScrollUpdate\n      if (\n        this.scrollPixelsRemaining <= 0 || this.scrollPixelsRemaining >= 400  // 已经滚动到底部或者离底部太远则结束\n        || interval >= 1000 // 离上一帧时间太久，可能用户切换到其他网页\n        || this.scrollTimeRemainingMs <= 0 // 时间已结束\n      ) {\n        this.resetSmoothScroll()\n        return\n      }\n\n      let pixelsToScroll = interval / this.scrollTimeRemainingMs * this.scrollPixelsRemaining\n      this.scrollPixelsRemaining -= pixelsToScroll\n      if (this.scrollPixelsRemaining < 0) {\n        this.scrollPixelsRemaining = 0\n      }\n      this.scrollTimeRemainingMs -= interval\n      if (this.scrollTimeRemainingMs < 0) {\n        this.scrollTimeRemainingMs = 0\n      }\n      this.lastSmoothScrollUpdate = time\n      this.smoothScrollRafHandle = window.requestAnimationFrame(this.smoothScroll)\n    },\n    resetSmoothScroll() {\n      this.scrollTimeRemainingMs = this.scrollPixelsRemaining = 0\n      this.lastSmoothScrollUpdate = null\n      if (this.smoothScrollRafHandle) {\n        window.cancelAnimationFrame(this.smoothScrollRafHandle)\n        this.smoothScrollRafHandle = null\n      }\n    },\n\n    maybeResizeScrollContainer() {\n      this.$refs.itemOffset.style.height = `${this.$refs.items.clientHeight}px`\n      this.maybeScrollToBottom()\n    },\n    maybeScrollToBottom() {\n      if (this.canScrollToBottomOrTimedOut()) {\n        this.scrollToBottom()\n      }\n    },\n    scrollToBottom() {\n      this.$refs.scroller.scrollTop = Math.pow(2, 24)\n      this.atBottom = true\n    },\n    onScroll() {\n      this.refreshCantScrollStartTime()\n      let scroller = this.$refs.scroller\n      this.atBottom = scroller.scrollHeight - scroller.scrollTop - scroller.clientHeight < SCROLLED_TO_BOTTOM_EPSILON\n      this.flushMessagesBuffer()\n    },\n    canScrollToBottomOrTimedOut() {\n      if (this.canScrollToBottom) {\n        return true\n      }\n      // 防止在OBS中卡住，超过一定时间也可以自动滚动\n      return new Date() - this.cantScrollStartTime >= 5 * 1000\n    },\n    refreshCantScrollStartTime() {\n      // 有鼠标事件时刷新，防止用户看弹幕时自动滚动\n      if (this.cantScrollStartTime) {\n        this.cantScrollStartTime = new Date()\n      }\n    }\n  }\n}\n</script>\n\n<style>\nyt-live-chat-renderer, yt-live-chat-item-list-renderer #item-scroller {\n  height: 100%;\n}\n\nyt-live-chat-renderer ::-webkit-scrollbar {\n  content: '';\n}\n\nyt-live-chat-renderer ::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 53.3%, .2);\n  border: 2px solid #fcfcfc;\n  min-height: 30px;\n}\n\nyt-live-chat-renderer ::-webkit-scrollbar-track {\n  background-color: #fcfcfc;\n}\n</style>\n\n<!-- html -->\n<style>\nhtml:not(.style-scope) {\n  --yt-live-chat-background-color: hsl(0, 0%, 100%);\n  --yt-live-chat-action-panel-background-color: hsla(0, 0%, 93.3%, .4);\n  --yt-live-chat-action-panel-background-color-transparent: hsla(0, 0%, 97%, .8);\n  --yt-live-chat-mode-change-background-color: hsla(0, 0%, 93.3%, .4);\n  --yt-live-chat-primary-text-color: hsl(0, 0%, 6.7%);\n  --yt-live-chat-secondary-text-color: hsla(0, 0%, 6.7%, .6);\n  --yt-live-chat-tertiary-text-color: hsla(0, 0%, 6.7%, .4);\n  --yt-live-chat-text-input-field-inactive-underline-color: #b8b8b8;\n  --yt-live-chat-text-input-field-placeholder-color: hsla(0, 0%, 6.7%, .6);\n  --yt-live-chat-icon-button-color: hsla(0, 0%, 6.7%, .4);\n  --yt-live-chat-enabled-send-button-color: #4285f4;\n  --yt-live-chat-disabled-icon-button-color: hsla(0, 0%, 6.7%, .2);\n  --yt-live-chat-picker-button-color: hsla(0, 0%, 6.7%, .4);\n  --yt-live-chat-picker-button-active-color: hsla(0, 0%, 6.7%, .8);\n  --yt-live-chat-picker-button-disabled-color: var(--yt-live-chat-disabled-icon-button-color);\n  --yt-live-chat-picker-button-hover-color: hsla(0, 0%, 6.7%, .6);\n  --yt-live-chat-mention-background-color: #ff5722;\n  --yt-live-chat-mention-text-color: hsl(0, 0%, 100%);\n  --yt-live-chat-deleted-message-color: rgba(0, 0, 0, .5);\n  --yt-live-chat-deleted-message-bar-color: rgba(11, 11, 11, .2);\n  --yt-live-chat-disabled-button-background-color: hsl(0, 0%, 93.3%);\n  --yt-live-chat-disabled-button-text-color: hsla(0, 0%, 6.7%, .4);\n  --yt-live-chat-sub-panel-background-color: hsl(0, 0%, 93.3%);\n  --yt-live-chat-sub-panel-background-color-transparent: hsla(0, 0%, 93%, .7);\n  --yt-live-chat-header-background-color: hsla(0, 0%, 93.3%, .4);\n  --yt-live-chat-header-button-color: hsl(0, 0%, 6.7%);\n  --yt-live-chat-error-message-color: hsl(10, 51%, 49%);\n  --yt-live-chat-reconnect-message-color: hsla(0, 0%, 7%, 0.2);\n  --yt-live-chat-moderator-color: hsl(225, 84%, 66%);\n  --yt-live-chat-owner-color: hsl(40, 76%, 55%);\n  --yt-live-chat-author-chip-owner-text-color: rgba(0,0,0,0.87);\n  --yt-live-chat-author-chip-verified-background-color: #CCCCCC;\n  --yt-live-chat-author-chip-verified-text-color: #606060;\n  --yt-live-chat-message-highlight-background-color: #f8f8f8;\n  --yt-live-chat-sponsor-color: #107516;\n  --yt-live-chat-overlay-color: hsla(0, 0%, 0%, 0.6);\n  --yt-live-chat-dialog-background-color: hsl(0, 0%, 100%);\n  --yt-live-chat-dialog-text-color: hsla(0, 0%, 6.7%, .6);\n  --yt-live-chat-poll-choice-text-color: var(--yt-spec-text-secondary);\n  --yt-live-chat-poll-choice-border-color: var(--yt-spec-10-percent-layer);\n  --yt-live-chat-poll-choice-vote-bar-background-color: hsla(0, 0%, 93.3%, .8);\n  --yt-live-chat-poll-choice-vote-bar-background-color-selected: #F2F8FF;\n  --yt-live-chat-poll-choice-color-selected: #065FD4;\n  --yt-live-chat-moderation-mode-hover-background-color: hsla(0, 0%, 6.7%, .2);\n  --yt-live-chat-additional-inline-action-button-color: hsl(0, 0%, 100%);\n  --yt-live-chat-additional-inline-action-button-background-color: hsla(0, 0%, 26%, 0.8);\n  --yt-live-chat-additional-inline-action-button-background-color-hover: hsla(0, 0%, 26%, 1.0);\n  --yt-formatted-string-emoji-size: 24px;\n  --yt-live-chat-emoji-size: 24px;\n  --yt-live-chat-text-input-field-suggestion-background-color: hsl(0, 0%, 100%);\n  --yt-live-chat-text-input-field-suggestion-background-color-hover: #eee;\n  --yt-live-chat-text-input-field-suggestion-text-color: #666;\n  --yt-live-chat-text-input-field-suggestion-text-color-hover: #333;\n  --yt-live-chat-ticker-arrow-background: hsl(0, 0%, 97.3%);\n  --yt-emoji-picker-category-background-color: var(--yt-live-chat-action-panel-background-color-transparent);\n  --yt-emoji-picker-category-color: var(--yt-live-chat-secondary-text-color);\n  --yt-emoji-picker-category-button-color: var(--yt-live-chat-picker-button-color);\n  --yt-emoji-picker-search-background-color: hsla(0, 0%, 100%, .6);\n  --yt-emoji-picker-search-color: hsla(0, 0%, 6.7%, .8);\n  --yt-emoji-picker-search-placeholder-color: hsla(0, 0%, 6.7%, .6);\n  --yt-live-chat-slider-active-color: #2196f3;\n  --yt-live-chat-slider-container-color: #c8c8c8;\n  --yt-live-chat-slider-markers-color: #505050;\n  --yt-live-chat-toast-background-color: hsl(0, 0%, 20%);\n  --yt-live-chat-toast-text-color: hsl(0, 0%, 100%);\n  --yt-live-chat-automod-button-background-color: hsl(0, 0%, 93.3%);\n  --yt-live-chat-automod-button-background-color-hover: hsla(0, 0%, 6.7%, .2);\n  --yt-live-chat-countdown-opacity: 0.3;\n  --yt-live-chat-shimmer-background-color: rgba(136, 136, 136, 0.2);\n  --yt-live-chat-shimmer-linear-gradient: linear-gradient(0deg, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0) 65%);\n  --yt-live-chat-vem-background-color: hsl(0, 0%, 93.3%);\n  --yt-live-chat-upsell-dialog-renderer-button-padding: 10px 16px;\n  --yt-live-chat-product-picker-icon-color: rgba(17, 17, 17, 0.6);\n  --yt-live-chat-product-picker-hover-color: rgba(17, 17, 16, 0.1);\n  --yt-live-chat-product-picker-disabled-icon-color: rgba(17, 17, 17, 0.4);\n  --yt-pdg-paid-stickers-tab-selection-bar-color: #065FD4;\n  --yt-pdg-paid-stickers-author-name-font-size: 13px;\n  --yt-pdg-paid-stickers-margin-left: 38px;\n}\n</style>\n\n<!-- yt-live-chat-app -->\n<style>\ncanvas.yt-live-chat-app, caption.yt-live-chat-app, center.yt-live-chat-app, cite.yt-live-chat-app, code.yt-live-chat-app, dd.yt-live-chat-app, del.yt-live-chat-app, dfn.yt-live-chat-app, div.yt-live-chat-app, dl.yt-live-chat-app, dt.yt-live-chat-app, em.yt-live-chat-app, embed.yt-live-chat-app, fieldset.yt-live-chat-app, font.yt-live-chat-app, form.yt-live-chat-app, h1.yt-live-chat-app, h2.yt-live-chat-app, h3.yt-live-chat-app, h4.yt-live-chat-app, h5.yt-live-chat-app, h6.yt-live-chat-app, hr.yt-live-chat-app, i.yt-live-chat-app, iframe.yt-live-chat-app, img.yt-live-chat-app, ins.yt-live-chat-app, kbd.yt-live-chat-app, label.yt-live-chat-app, legend.yt-live-chat-app, li.yt-live-chat-app, menu.yt-live-chat-app, object.yt-live-chat-app, ol.yt-live-chat-app, p.yt-live-chat-app, pre.yt-live-chat-app, q.yt-live-chat-app, s.yt-live-chat-app, samp.yt-live-chat-app, small.yt-live-chat-app, span.yt-live-chat-app, strike.yt-live-chat-app, strong.yt-live-chat-app, sub.yt-live-chat-app, sup.yt-live-chat-app, table.yt-live-chat-app, tbody.yt-live-chat-app, td.yt-live-chat-app, tfoot.yt-live-chat-app, th.yt-live-chat-app, thead.yt-live-chat-app, tr.yt-live-chat-app, tt.yt-live-chat-app, u.yt-live-chat-app, ul.yt-live-chat-app, var.yt-live-chat-app {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: transparent;\n}\n\n.yt-live-chat-app[hidden] {\n  display: none !important;\n}\n\nyt-live-chat-app {\n  display: block;\n  width: 100vw;\n  height: 100vh;\n  --yt-report-form-modal-renderer-min-width: 0;\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\n#contents.yt-live-chat-app {\n/* yt-live-chat-renderer.yt-live-chat-app { */\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n}\n\n#contents.yt-live-chat-app>*.yt-live-chat-app {\n/* yt-live-chat-renderer.yt-live-chat-app { */\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n}\n\nyt-live-chat-app[dashboard-money-feed] #contents.yt-live-chat-app>yt-live-chat-message-renderer.yt-live-chat-app {\n  font-size: 18px;\n}\n</style>\n\n<!-- yt-live-chat-renderer -->\n<style>\ncanvas.yt-live-chat-renderer, caption.yt-live-chat-renderer, center.yt-live-chat-renderer, cite.yt-live-chat-renderer, code.yt-live-chat-renderer, dd.yt-live-chat-renderer, del.yt-live-chat-renderer, dfn.yt-live-chat-renderer, div.yt-live-chat-renderer, dl.yt-live-chat-renderer, dt.yt-live-chat-renderer, em.yt-live-chat-renderer, embed.yt-live-chat-renderer, fieldset.yt-live-chat-renderer, font.yt-live-chat-renderer, form.yt-live-chat-renderer, h1.yt-live-chat-renderer, h2.yt-live-chat-renderer, h3.yt-live-chat-renderer, h4.yt-live-chat-renderer, h5.yt-live-chat-renderer, h6.yt-live-chat-renderer, hr.yt-live-chat-renderer, i.yt-live-chat-renderer, iframe.yt-live-chat-renderer, img.yt-live-chat-renderer, ins.yt-live-chat-renderer, kbd.yt-live-chat-renderer, label.yt-live-chat-renderer, legend.yt-live-chat-renderer, li.yt-live-chat-renderer, menu.yt-live-chat-renderer, object.yt-live-chat-renderer, ol.yt-live-chat-renderer, p.yt-live-chat-renderer, pre.yt-live-chat-renderer, q.yt-live-chat-renderer, s.yt-live-chat-renderer, samp.yt-live-chat-renderer, small.yt-live-chat-renderer, span.yt-live-chat-renderer, strike.yt-live-chat-renderer, strong.yt-live-chat-renderer, sub.yt-live-chat-renderer, sup.yt-live-chat-renderer, table.yt-live-chat-renderer, tbody.yt-live-chat-renderer, td.yt-live-chat-renderer, tfoot.yt-live-chat-renderer, th.yt-live-chat-renderer, thead.yt-live-chat-renderer, tr.yt-live-chat-renderer, tt.yt-live-chat-renderer, u.yt-live-chat-renderer, ul.yt-live-chat-renderer, var.yt-live-chat-renderer {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: transparent;\n}\n\n.yt-live-chat-renderer[hidden] {\n  display: none !important;\n}\n\nyt-live-chat-renderer {\n  font-size: 13px;\n  --yt-emoji-picker-renderer-height: 180px;\n  --yt-button-default-text-color: var(--yt-live-chat-button-default-text-color);\n  --yt-button-default-background-color: var(--yt-live-chat-button-default-background-color);\n  --yt-button-dark-text-color: var(--yt-live-chat-button-dark-text-color);\n  --yt-button-dark-background-color: var(--yt-live-chat-button-dark-background-color);\n  --yt-button-payment-background-color: var(--yt-live-chat-sponsor-color);\n}\n\nyt-live-chat-renderer {\n  position: relative;\n  background: var(--yt-live-chat-background-color);\n  color: var(--yt-live-chat-primary-text-color);\n  overflow: hidden;\n  z-index: 0;\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\nyt-live-chat-renderer[hide-timestamps] {\n  --yt-live-chat-item-timestamp-display: none;\n}\n\n#separator.yt-live-chat-renderer {\n  border-bottom: var(--yt-live-chat-header-bottom-border, none);\n}\n\n#content-pages.yt-live-chat-renderer {\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n}\n\n#panel-pages.yt-live-chat-renderer {\n  max-height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n#contents.yt-live-chat-renderer {\n  overflow: hidden;\n  position: relative;\n  z-index: 0;\n}\n\n#chat-messages.yt-live-chat-renderer, #contents.yt-live-chat-renderer, #item-list.yt-live-chat-renderer {\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n}\n\n#ticker.yt-live-chat-renderer {\n  z-index: 1;\n}\n\n#chat.yt-live-chat-renderer {\n  position: relative;\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n}\n\n#chat.yt-live-chat-renderer::after {\n  content: '';\n  display: none;\n  animation: gradient-slide 1.2s ease infinite;\n  animation-name: gradient-slide;\n  background-color: var(--yt-live-chat-shimmer-background-color);\n  background-image: var(--yt-live-chat-shimmer-linear-gradient);\n  background-size: 300% 300%;\n  transform: rotateX(180deg);\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\nyt-live-chat-renderer[loading] #chat.yt-live-chat-renderer::after {\n  display: block;\n}\n\nyt-live-chat-pinned-message-renderer.yt-live-chat-renderer {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\nyt-live-chat-item-list-renderer.yt-live-chat-renderer, yt-live-chat-ninja-message-renderer.yt-live-chat-renderer {\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n}\n\n#action-panel.yt-live-chat-renderer {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n}\n\nyt-live-chat-renderer[has-action-panel-renderer] yt-live-chat-action-panel-renderer.yt-live-chat-renderer {\n  animation: slideUp cubic-bezier(0.05, 0.00, 0.00, 1.00) forwards;\n  animation-duration: 0.5s;\n}\n\n#action-panel-backdrop.yt-live-chat-renderer {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  visibility: hidden;\n}\n\nyt-live-chat-renderer[has-action-panel-renderer] #action-panel-backdrop.yt-live-chat-renderer {\n  visibility: visible;\n  animation: fadeIn cubic-bezier(0.05, 0.00, 0.00, 1.00) forwards;\n  animation-duration: 0.5s;\n}\n\n#input-panel.yt-live-chat-renderer {\n  -ms-flex: none;\n  -webkit-flex: none;\n  flex: none;\n}\n\n#input-panel.yt-live-chat-renderer:not(:empty) {\n  border-top: var(--yt-live-chat-action-panel-top-border, none);\n}\n\n.hide-on-collapse.yt-live-chat-renderer {\n  transition: opacity 0.3s;\n}\n\nyt-live-chat-renderer[collapsed] .hide-on-collapse.yt-live-chat-renderer {\n  opacity: 0;\n}\n\n#loading.yt-live-chat-renderer {\n  height: 387px;\n  background-color: var(--yt-live-chat-action-panel-background-color);\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-align: center;\n  -webkit-align-items: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n\n#loading.yt-live-chat-renderer>paper-spinner-lite.yt-live-chat-renderer {\n  --paper-spinner-color: var(--yt-live-chat-primary-text-color);\n}\n\n#nitrate-promo.yt-live-chat-renderer>*.yt-live-chat-renderer {\n  background: var(--yt-live-chat-overlay-color);\n  z-index: 3;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n@keyframes gradient-slide {\n  0% {\n    background-position: 100% 100%;\n  }\n  to {\n    background-position: 0% 0%;\n  }\n}\n\n@keyframes slideUp {\n  0% {\n    transform: translateY(15%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes fadeIn {\n  0% {\n    background-color: transparent;\n  }\n  100% {\n    background-color: rgba(0, 0, 0, 0.60);\n  }\n}\n</style>\n\n<!-- yt-live-chat-item-list-renderer -->\n<style>\ncanvas.yt-live-chat-item-list-renderer, caption.yt-live-chat-item-list-renderer, center.yt-live-chat-item-list-renderer, cite.yt-live-chat-item-list-renderer, code.yt-live-chat-item-list-renderer, dd.yt-live-chat-item-list-renderer, del.yt-live-chat-item-list-renderer, dfn.yt-live-chat-item-list-renderer, div.yt-live-chat-item-list-renderer, dl.yt-live-chat-item-list-renderer, dt.yt-live-chat-item-list-renderer, em.yt-live-chat-item-list-renderer, embed.yt-live-chat-item-list-renderer, fieldset.yt-live-chat-item-list-renderer, font.yt-live-chat-item-list-renderer, form.yt-live-chat-item-list-renderer, h1.yt-live-chat-item-list-renderer, h2.yt-live-chat-item-list-renderer, h3.yt-live-chat-item-list-renderer, h4.yt-live-chat-item-list-renderer, h5.yt-live-chat-item-list-renderer, h6.yt-live-chat-item-list-renderer, hr.yt-live-chat-item-list-renderer, i.yt-live-chat-item-list-renderer, iframe.yt-live-chat-item-list-renderer, img.yt-live-chat-item-list-renderer, ins.yt-live-chat-item-list-renderer, kbd.yt-live-chat-item-list-renderer, label.yt-live-chat-item-list-renderer, legend.yt-live-chat-item-list-renderer, li.yt-live-chat-item-list-renderer, menu.yt-live-chat-item-list-renderer, object.yt-live-chat-item-list-renderer, ol.yt-live-chat-item-list-renderer, p.yt-live-chat-item-list-renderer, pre.yt-live-chat-item-list-renderer, q.yt-live-chat-item-list-renderer, s.yt-live-chat-item-list-renderer, samp.yt-live-chat-item-list-renderer, small.yt-live-chat-item-list-renderer, span.yt-live-chat-item-list-renderer, strike.yt-live-chat-item-list-renderer, strong.yt-live-chat-item-list-renderer, sub.yt-live-chat-item-list-renderer, sup.yt-live-chat-item-list-renderer, table.yt-live-chat-item-list-renderer, tbody.yt-live-chat-item-list-renderer, td.yt-live-chat-item-list-renderer, tfoot.yt-live-chat-item-list-renderer, th.yt-live-chat-item-list-renderer, thead.yt-live-chat-item-list-renderer, tr.yt-live-chat-item-list-renderer, tt.yt-live-chat-item-list-renderer, u.yt-live-chat-item-list-renderer, ul.yt-live-chat-item-list-renderer, var.yt-live-chat-item-list-renderer {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: transparent;\n}\n\n.yt-live-chat-item-list-renderer[hidden] {\n  display: none !important;\n}\n\nyt-live-chat-item-list-renderer {\n  position: relative;\n  display: block;\n  overflow: hidden;\n  z-index: 0;\n}\n\nyt-live-chat-item-list-renderer[moderation-mode-enabled] {\n  --yt-live-chat-item-with-inline-actions-context-menu-display: none;\n  --yt-live-chat-inline-action-button-container-display: flex;\n}\n\n#contents.yt-live-chat-item-list-renderer {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\n#empty-state-message.yt-live-chat-item-list-renderer {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n\n#empty-state-message.yt-live-chat-item-list-renderer>yt-live-chat-message-renderer.yt-live-chat-item-list-renderer {\n  color: var(--yt-live-chat-tertiary-text-color);\n  background: transparent;\n  font-size: 18px;\n  --yt-live-chat-message-renderer-text-align: center;\n}\n\nyt-icon-button.yt-live-chat-item-list-renderer {\n  background-color: #2196f3;\n  border-radius: 999px;\n  bottom: 0;\n  color: #fff;\n  cursor: pointer;\n  width: 32px;\n  height: 32px;\n  margin: 0 calc(50% - 16px) 8px calc(50% - 16px);\n  padding: 4px;\n  position: absolute;\n  transition-property: bottom;\n  transition-timing-function: cubic-bezier(0.0, 0.0, 0.2, 1);\n  transition-duration: 0.15s;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n}\n\nyt-icon-button.yt-live-chat-item-list-renderer[disabled] {\n  bottom: -42px;\n  color: #fff;\n  transition-timing-function: cubic-bezier(0.4, 0.0, 1, 1);\n}\n\n#item-scroller.yt-live-chat-item-list-renderer {\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  padding-right: var(--scrollbar-width);\n}\n\nyt-live-chat-item-list-renderer[allow-scroll] #item-scroller.yt-live-chat-item-list-renderer {\n  overflow-y: scroll;\n  padding-right: 0;\n}\n\n#item-offset.yt-live-chat-item-list-renderer {\n  position: relative;\n}\n\n#item-scroller.animated.yt-live-chat-item-list-renderer #item-offset.yt-live-chat-item-list-renderer {\n  overflow: hidden;\n}\n\n#items.yt-live-chat-item-list-renderer {\n  -ms-flex: 1 1 0.000000001px;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-basis: 0.000000001px;\n  flex-basis: 0.000000001px;\n  padding: var(--yt-live-chat-item-list-renderer-padding, 4px 0);\n}\n\n#items.yt-live-chat-item-list-renderer>*.yt-live-chat-item-list-renderer:not(:first-child) {\n  border-top: var(--yt-live-chat-item-list-item-border, none);\n}\n\n#item-scroller.animated.yt-live-chat-item-list-renderer #items.yt-live-chat-item-list-renderer {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  transform: translateY(0);\n}\n\n#docked-messages.yt-live-chat-item-list-renderer {\n  z-index: 1;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n}\n\nyt-live-chat-paid-sticker-renderer.yt-live-chat-item-list-renderer {\n  padding: 4px 24px;\n}\n\nyt-live-chat-paid-sticker-renderer.yt-live-chat-item-list-renderer[dashboard-money-feed] {\n  padding: 8px 16px;\n}\n</style>\n"],"sourceRoot":"src/components/ChatRenderer"}]}